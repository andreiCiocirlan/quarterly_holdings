{% extends 'base.html' %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.min.css">
{% endblock %}

{% block title %}
Filers Holding {{ ticker }} – Q{{ quarter }} {{ year }}
{% endblock %}


{% block content %}

<h1>Filers Holding {{ ticker }} – Q{{ quarter }} {{ year }}</h1>

{% if holders %}
<table id="filersTable" class="table table-striped table-hover table-sm">
  <thead class="table-dark">
  <tr>
    <th>Filer Name</th>
    <th>Shares</th>
    <th>Value ($)</th>
    <th>Ownership (%)</th>
  </tr>
  </thead>
  <tbody>
  {% for filer_name, shares, value, ownership_pct in holders %}
  <tr>
    <td>{{ filer_name }}</td>
    <td>{{ "{:,}".format(shares) if shares is not none else '-' }}</td>
    <td>{{ (value | format_large_number) if value is not none else '-' }}</td>
    <td>{{ "{:.2f}%".format(ownership_pct) if ownership_pct is not none else '-' }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No filers found holding {{ ticker }} in Q{{ quarter }} {{ year }}.</p>
{% endif %}

<a href="{{ url_for('ticker_quarterly_holdings', ticker=ticker) }}" class="btn btn-secondary mt-3">
  Back to Quarterly Holdings Summary
</a>

{% endblock %}

{% block scripts %}
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js"></script>
  <script src="{{ url_for('static', filename='js/filers-detail.js') }}"></script>
{% endblock %}